<!DOCTYPE html>
<html>
  <head>
    <title>Steady Life</title>
    <link rel="stylesheet" type="text/css" href="/public/style/style.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/public/style/createForm.css"
    />
  </head>
  <body>
    <h1 class="main-text">Steady Life</h1>
    <p><%= user.displayName %>님 환영합니다😄</p>
    <a href="auth/logout">Logout</a>
    <hr />
    <br />
    <input type="date" />
    <div class="create-container">
      <div class="hidden to-do-create-container">
        <form action="/todo/write" method="post" class="form-box">
          <table class="input-table">
            <tr style="height: 50px">
              <td>Categoty</td>
              <br />
              <td colspan="3">
                <select class="input-category" name="category">
                  <option value="" selected="selected">---선택---</option>
                  <option value="개발">개발</option>
                  <option value="독서">독서</option>
                  <option value="공부">공부</option>
                  <option value="운동">운동</option>
                  <option value="산책">산책</option>
                </select>
              </td>
            </tr>
            <tr style="height: 50px">
              <td>To do</td>
              <td colspan="3">
                <input
                  class="input-title"
                  type="text"
                  placeholder="ex) Web Development"
                  name="title"
                />
              </td>
            </tr>
            <tr style="height: 50px">
              <td>Time</td>
              <td>
                <input
                  id="start-time"
                  class="input-time"
                  type="time"
                  name="startTime"
                />
              </td>
              <td>~</td>
              <td>
                <input
                  id="end-time"
                  class="input-time"
                  type="time"
                  name="endTime"
                />
              </td>
            </tr>
          </table>
          <button type="submit" class="btn">Add</button>
          <button type="button" id="form-close-button">Close</button>
        </form>
      </div>
    </div>
    <br />
    <ul class="list-box">
      <% var date = ""; var next_date = ""; todoTasks.forEach(tasks => { date =
      (tasks.date).substring(0, 10); if(date != next_date){ next_date = date; %>
      <li>
        <div class="date"><%= date %></div>
      </li>
      <% } %>
      <li class="todo-item">
        <div class="todo-item-content" id="content">
          &emsp;<%= tasks.category %> &emsp; &emsp;<%= tasks.title %> &emsp;
          &emsp;<%= tasks.startTime %> &emsp; &emsp;<%= tasks.endTime %> &emsp;
        </div>
        <div class="edit-btn">
          <button
            type="button"
            id="img"
            onclick="location.href='/todo/edit/<%= tasks._id %>'"
          >
            Edit
          </button>
          <button
            type="button"
            id="img"
            onclick="location.href='/todo/remove/<%= tasks._id %>'"
          >
            Delete
          </button>
        </div>
      </li>
      <% }); %>
    </ul>

    <footer class="main-footer">
      <div id="main-footer-contents">
        <button class="create-list-btn btn-hover">Create</button>
      </div>
    </footer>
    <script>
      document
        .querySelector('.create-list-btn')
        .addEventListener('click', (e) => {
          // e.preventDefault();

          const target = document.querySelector('.to-do-create-container');

          target.classList.remove('hidden');
          target.classList.add('appear');
        });

      document
        .querySelector('#form-close-button')
        .addEventListener('click', (e) => {
          // e.preventDefault();

          const target = document.querySelector('.to-do-create-container');

          target.classList.add('hidden');
        });
    </script>
  </body>
</html>
